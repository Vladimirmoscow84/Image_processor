


__________________ЗАПУСК в ДОКЕРЕ___________
 postgres:
docker run -d --name pg-image_processor -p 5440:5432 -e POSTGRES_USER=vladimir -e POSTGRES_PASSWORD="password" -e POSTGRES_DB="image_processor" postgres:latest

zookeeper:
docker run -d --name zookeeper -p 2181:2181 -e ALLOW_ANONYMOUS_LOGIN=yes bitnami/zookeeper:latest

kafka:
docker run -d --name kafka --link zookeeper:zookeeper -p 9092:9092 -e KAFKA_BROKER_ID=1 -e KAFKA_ZOOKEEPER_CONNECT=zookeeper:2181 -e KAFKA_LISTENERS=PLAINTEXT://0.0.0.0:9092 -e KAFKA_ADVERTISED_LISTENERS=PLAINTEXT://localhost:9092 -e ALLOW_PLAINTEXT_LISTENER=yes bitnami/kafka:latest

После запуска проверка брокера:
docker exec -it kafka kafka-broker-api-versions.sh --bootstrap-server localhost:9092




миграции:
Миграции на домашнем Маке:
 *** c УЧЕТОМ ошибок переменной окружения  (PGLOCALEDIR=/Library/PostgreSQL/17/share/locale)***

migrate create -ext sql -dir /Users/mac/Dev/WBTech/image_processor/db/dumps -seq tables

 env -u PGLOCALEDIR migrate -database "postgres://localhost:5440/image_processor?sslmode=disable&user=vladimir&password=password" -path /Users/mac/Dev/WBTech/image_processor/db/dumps up

 env -u PGLOCALEDIR migrate -database "postgres://localhost:5440/image_processor?sslmode=disable&user=vladimir&password=password" -path /Users/mac/Dev/WBTech/image_processor/db/dumps down
