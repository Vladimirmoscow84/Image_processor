# ImageProcessor

 ## ImageProcessor ‚Äî —Å–µ—Ä–≤–∏—Å –¥–ª—è —Ñ–æ–Ω–æ–≤–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –æ—á–µ—Ä–µ–¥–µ–π –∏ —Ö—Ä–∞–Ω–µ–Ω–∏—è –æ—Ä–∏–≥–∏–Ω–∞–ª–æ–≤, –º–∏–Ω–∏–∞—Ç—é—Ä –∏ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –≤–µ—Ä—Å–∏–π.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —á–µ—Ä–µ–∑ HTTP (`POST /upload`)
- –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–∏ (`GET /image/{id}`)
- –£–¥–∞–ª–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (`DELETE /image/{id}`)
- –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (`GET /images`)
- –§–æ–Ω–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —á–µ—Ä–µ–∑ –æ—á–µ—Ä–µ–¥—å (Kafka)
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è:
  - —É–º–µ–Ω—å—à–µ–Ω–Ω—ã—Ö –≤–µ—Ä—Å–∏–π (processed)
  - –º–∏–Ω–∏–∞—Ç—é—Ä (thumbnail)
  - –≤–æ–¥—è–Ω–æ–≥–æ –∑–Ω–∞–∫–∞ (watermark) –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏
- –•—Ä–∞–Ω–µ–Ω–∏–µ:
  - –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (`data/uploads`)
  - –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ (`data/processed`)
  - –º–∏–Ω–∏–∞—Ç—é—Ä—ã (`data/thumbs`)
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–æ—Ä–º–∞—Ç–æ–≤: JPEG, PNG, GIF
- –ü—Ä–æ—Å—Ç–æ–π –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏, –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏ —É–¥–∞–ª–µ–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- Go (Gin, sqlx, imaging)
- PostgreSQL (–¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö)
- Apache Kafka (—Ñ–æ–Ω–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞)
- HTML + JS + CSS (—Ñ—Ä–æ–Ω—Ç–µ–Ω–¥)

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

/cmd/server - —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ —Å–µ—Ä–≤–µ—Ä–∞
/internal/app - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—É—â–Ω–æ—Å—Ç–µ–π –∏ –∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
/internal/service - –ª–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
/internal/storage - —Ä–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏ –∏ –ë–î
/internal/handlers - HTTP-—ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –∏ —Ö—ç–Ω–¥–ª–µ—Ä—ã
/internal/queue_broker/kafka - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏ —Ä–∞–±–æ—Ç–∞ –±—Ä–æ–∫–µ—Ä–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
/web - —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ (HTML, JS, CSS)


## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

1. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å `.env` —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –ë–î, Kafka –∏ –ø—É—Ç—è–º–∏ –∫ —Ñ–∞–π–ª–∞–º.
2. –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É `images` –≤ PostgreSQL:

```sql
CREATE TABLE images (
    id SERIAL PRIMARY KEY,
    original_path TEXT NOT NULL,
    processed_path TEXT,
    thumbnail_path TEXT,
    status TEXT NOT NULL,
    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW()
);
–ª–∏–±–æ –ø—Ä–∏ –ø–æ–º–æ—â–∏ –º–∏–≥—Ä–∞—Ü–∏–π db/dumps

3. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä:
go run cmd/server/main.go

4. –û—Ç–∫—Ä—ã—Ç—å –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å: http://localhost:7575

5. –ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏ –Ω–∞–±–ª—é–¥–∞—Ç—å –µ–≥–æ –æ–±—Ä–∞–±–æ—Ç–∫—É.

–õ–µ–≥–∫–∏–π –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—ã–π —Å–µ—Ä–≤–∏—Å –¥–ª—è –ª—é–±—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π, –≥–¥–µ –Ω—É–∂–Ω–æ –±—ã—Å—Ç—Ä–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

–ü—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω –∫–∞–∫ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –º–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–æ–≥–æ Go-—Å–µ—Ä–≤–∏—Å–∞ —Å PostgreSQL, KAFKA, REST API –∏ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º UI –±–µ–∑ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–≤

–ê–≤—Ç–æ—Ä
–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫: Vladimirmoscow84
üìß –ö–æ–Ω—Ç–∞–∫—Ç: ccr1@yandex.ru
üì¶ GitHub: github.com/Vladimirmoscow84


